{% extends 'base.html' %}

{% block content %}
    <h3>Dodaj nowy produkt</h3>
<!--  Formularz dodawania produktów -->
    <form action="/dodaj" method="post">
        <label>Nazwa produktu:</label><br>
        <input type="text" name="nazwa" placeholder="np. Mleko" required>
        <br><br>

        <label>Data ważności:</label><br>
        <input type="date" name="data" required>
        <br><br>

        <label>Ilość:</label><br>
        <input type="number" name="ilosc" step="0.1" placeholder="0" min="0" required>
        <br><br>

        <label>Jednostka:</label><br>
        <select name="wybrana_jednostka">
            <option value="szt">Sztuki</option>
            <option value="kg">Kilogramy (kg)</option>
            <option value="g">Gramy (g)</option>
            <option value="l">Litry (l)</option>
            <option value="ml">Mililitry (ml)</option>
        </select>
        <br><br>

        <button type="submit">Zapisz produkt</button>
    </form>

    <hr>

    <h3>Twoja Lodówka</h3>

    <ul>
<!-- Generowanei listy produktów -->
<!-- TODO Dodac możliwość usuwania wybranej ilości, np jak użyjemy tylko części -->
        {% for p in produkty %}
            <li>
                <strong>{{ p.name }}</strong>
                ---
                Ilość: {{ p.ilosc }} {{ p.jednostka }}
                ---
                Status:
                {% if p.ile_dni_waznosci < 0 %}
                    [PRZETERMINOWANE!]
                {% elif p.ile_dni_waznosci <= limit_dni %}
                    [ZJEDZ SZYBKO]
                {% else %}
                    [OK]
                {% endif %}
                ({{ p.ile_dni_waznosci }} dni)

                ---
                <a href="/zuzyj/{{ p.id }}">[Zużyj]</a>

                <a href="/usun/{{ p.id }}">USUŃ (X)</a>
            </li>
        {% endfor %}
    </ul>

    {% if not produkty %}
        <p><i>Brak produktów. Dodaj coś formularzem powyżej.</i></p>
    {% endif %}
{% endblock %}